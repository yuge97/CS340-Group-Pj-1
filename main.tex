\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}
\usepackage[]{algorithm2e}
\geometry{letterpaper}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amsthm,enumerate}
\usepackage{amsmath}
\usepackage{parskip}

\graphicspath{ {images/} }

\newtheorem*{theorem}{Theorem}
\newtheorem*{lemma}{Lemma}
%SetFonts

\title{CS340 - Group Project 1}
\author{Caroline Shen, Rose Lin, Sunny Qi}
\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle


\section{Algorithm Description}
We schedule all classes using the popularity of each class as main criteria. First we traverse over the student preference list and find out the number of student who want to attend each class and sort the classes from the most popular to the least popular. 

Then we sort all rooms by their sizes from small to large. Starting from the most popular class, try to assign the class to the smallest classroom $c$ it can fit in. For each time slots $t$ for $c$, check this course with all courses in the same time slot. If it is not taught by the same professor as any course in the same time, assign the class to this time. If there is no such empty time slot in this room, move to the next largest room and repeatedly checking for such a time slot. 

If such a time slot doesn't exist in all rooms that can fit that class. We move to rooms that have capacity less than the number of people registered and find a time slot without conflict and squeeze the class into that room. There has to be such a room since the product of the number of time slot and the number of rooms must be greater than the number of total classes by the way we setup the data. If there are more classes than the product, we just don't assign the rest of the classes.

\section{}
\begin{algorithm}[H]
\SetKwFunction{foo}{foo}
\SetKwProg{Fn}{Scheduling}{(C, S, P, T, R)}{}
\Fn{\Scheduling{}}{
    Schedule[][]
    
    Position = []
    
    Calculate popularity of each class.
    
    Sort all classes by popularity. 
    
    \For{each class c $\in$ C}{
        Find out the smallest room it can fit with an empty time slot, r.
        
        \For{each time t in T}{
            %optional, need further discussion
            
            check all Schedule[t][$r-i$] ($0<i < r$)
        
            Find empty Schedule[t][r] without professor conflict= c
            
            Position[c] = (t,r)
        }
        
    }
    return schedule[][], Position
    
}
\end{algorithm}

\begin{algorithm}[H]
\SetKwFunction{foo}{foo}
\SetKwProg{Fn}{test}{(S, Pref, Schedule, Position)}{}
\Fn{\test{}}{
    count = 0

    \For{each student s in S}{
        final pick = [0]$\times len(Schedule)$

        \For{each class c in Pref[s]}{

            t = Position[c][0]      
            
            \If{final pick[t] is empty}{
                 final pick[t] = c
                 
                 count += 1 
            }
        }
    }
    return $count/(len(Pref[0])\times len(S))$
}

\end{algorithm}
\section{Time Analysis}
Let \textbf{n} be the number of students. 
Let \textbf{l} be the average length of each student's preference list.
Let \textbf{m} be the total number of classes. 
Let \textbf{r} be the number of rooms. 
Let \textbf{t} be the number of time slots. 
Notice that $p$ and $t$ are strictly smaller than $n$.

Calculating the popularity of each class takes $O(n\times l)$. Sorting all classes takes $O(mlogm)$. The first for loop in Scheduling() runs \textbf{m} iterations. Finding out the smallest room each class can fit takes $O(1)$. The inner for loop runs \textbf{t} iterations. Checking all schedules runs $t \times r$ times, totally. So the algorithm runs in $O(n)$.


\section{Discussion}
Since we are prioritizing popular classes that students want to take at the same time, and making these classes available to as many students as possible, we think this would be a great approach to this problem.

In the mean time, we are taking the classroom and professor's availability into consideration. There would not be any 2 classes which are in the same time slot having the same teacher. Also, the class size won't exceed the capacity of the classrooms since we are assigning smaller rooms first. If there are an unavoidable conflict, we will sacrifice the smallest number of students that are involved in this conflict.

However, we are not sure how optimal this algorithm will be. Potential improvement could be made if we can come up with a better solution. Since we are not sure about how much smaller the number of classes is, compared to the number of students, the algorithm will be inefficient if $m^2$ is actually greater than $n \log n$.


\end{document}
