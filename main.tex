\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}
\usepackage[]{algorithm2e}
\geometry{letterpaper}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amsthm,enumerate}
\usepackage{amsmath}
\usepackage{parskip}

\graphicspath{ {images/} }

\newtheorem*{theorem}{Theorem}
\newtheorem*{lemma}{Lemma}
%SetFonts

\title{CS340 - Group Project 1}
\author{Caroline Shen, Rose Lin, Sunny Qi}
\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle


\section{Algorithm Description}
We schedule all classes using the popularity of each class as main criteria. First we traverse over the student preference list and find out the number of student who want to attend each class and sort the classes from the most popular to the least popular. 

Then we sort all rooms by their sizes from small to large. Starting from the most popular class, try to assign the class to the smallest classroom $c$ it can fit in. For each time slots $t$ for $c$, check this course with all courses in the same time slot. If it is not taught by the same professor as any course in the same time, assign the class to this time. If there is no such empty time slot in this room, move to the next largest room and repeatedly checking for such a time slot. 

If such a time slot doesn't exist in all rooms that can fit that class. We move to rooms that have capacity less than the number of people registered and find a time slot without conflict and squeeze the class into that room. 

\section{}
\begin{algorithm}[H]
\SetKwFunction{foo}{foo}
\SetKwProg{Fn}{Scheduling}{(C, S, P, T, R)}{}
\Fn{\Scheduling{}}{
    Schedule[][]
    
    Position = []
    
    Calculate popularity of each class.
    
    Sort all classes by popularity. 
    
    \For{each class c $\in$ C}{
        Find out the smallest room it can fit with an empty time slot, r.
        
        \For{each time t in T}{
            %optional, need further discussion
            
            check all Schedule[t][$r-i$] ($0<i < r$)
        
            Find empty Schedule[t][r] without professor conflict= c
            
            Position[c] = (t,r)
        }
        
    }
    return schedule[][], Position
    
}
\end{algorithm}

\begin{algorithm}[H]
\SetKwFunction{foo}{foo}
\SetKwProg{Fn}{test}{(S, Pref, Schedule, Position)}{}
\Fn{\test{}}{
    count = 0

    \For{each student s in S}{
        final pick = [0]$\times len(Schedule)$

        \For{each class c in Pref[s]}{

            t = Position[c][0]      
            
            \If{final pick[t] is empty}{
                 final pick[t] = c
                 
                 count += 1 
            }
        }
    }
    return $count/(len(Pref[0])\times len(S))$
}

\end{algorithm}
\section{Time Analysis}
Let $n$ be the number of students times the number of classes they can take. Let $m$ be the total number of classes. Let $p$ be the number of classrooms. Let $t$ be the number of time slots. Notice that $m$, $p$ and $t$ are strictly smaller than $n$.

Getting the conflicts of each pair of classes takes $O(n)$ and sort this list takes $O(n\log n)$. Sort the sizes of the room takes $O(p \log p)$. The outside for loop will run at most $m \choose 2$ times, which is $O(m^2)$. Finding the smallest room that a class can fill takes $O(p)$ for a sorted list. For each available time slot of that room, comparing with all the other classes in the same time slot takes $O(pt)$. Since all pairs of classes and their number of conflicts are stored in a dictionary where the keys are the class pairs and values are the number of conflicts, checking the student conflicts takes $O(1)$.

Therefore, the entire algorithm runs at complexity $O(n \log n)+O(m^2pt)$. If $p$ and $t$ are too small to affect the total time complexity, then the complexity is equivalent to $O(n \log n)+O(m^2)$.

\section{Discussion}
Since we are prioritizing popular classes that students want to take at the same time, and making these classes available to as many students as possible, we think this would be a great approach to this problem.

In the mean time, we are taking the classroom and professor's availability into consideration. There would not be any 2 classes which are in the same time slot having the same teacher. Also, the class size won't exceed the capacity of the classrooms since we are assigning smaller rooms first. If there are an unavoidable conflict, we will sacrifice the smallest number of students that are involved in this conflict.

However, we are not sure how optimal this algorithm will be. Potential improvement could be made if we can come up with a better solution. Since we are not sure about how much smaller the number of classes is, compared to the number of students, the algorithm will be inefficient if $m^2$ is actually greater than $n \log n$.


\end{document}
