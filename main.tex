\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}
\usepackage[]{algorithm2e}
\geometry{letterpaper}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amsthm,enumerate}
\usepackage{amsmath}
\usepackage{parskip}

\graphicspath{ {images/} }

\newtheorem*{theorem}{Theorem}
\newtheorem*{lemma}{Lemma}
%SetFonts

\title{CS340 - Group Project 1}
\author{Caroline Shen, Rose Lin, Sunny Qi}
\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle


\section{Algorithm Description}
For every two classes, we find the number of students that cannot attend both. Then sort them in decreasing order. 

Pick the first one from the list and find the corresponding two classes. For each of them, if the class is not assigned, pick the smallest room that it can fit. For each available time slot of that room, compare with all the other classes in the same time slot. If there exist a class that is taught by the same professor or there are students that want to take both classes, change to the next available time slot. If all time slots are taken, then change to the next smallest room and put it in an available time slot. If all time slots are not available, put it in a time slot where there are least number of students that want to take all classes in that time slot. Mark this class as assigned. 

Repeat the process for each one in the list. The final schedule should be the optimal schedule.

\section{}
\begin{algorithm}[H]
\SetKwFunction{foo}{foo}
\SetKwProg{Fn}{Scheduling}{(C, S, P, T, R)}{}
\Fn{\Scheduling{}}{
    Schedule[][]
    
    Position = []
    
    Calculate popularity of each class.
    
    Sort all classes by popularity. 
    
    \For{each class c $\in$ C}{
        Find out the smallest room it can fit with an empty time slot, r.
        
        \For{each time t in T}{
            %optional, need further discussion
            
            check all Schedule[t][$r-i$] ($0<i < r$)
        
            Find empty Schedule[t][r] without professor conflict= c
            
            Position[c] = (t,r)
        }
        
    }
    return schedule[][], Position
    
}
\end{algorithm}

\begin{algorithm}[H]
\SetKwFunction{foo}{foo}
\SetKwProg{Fn}{test}{(S, Pref, Schedule, Position)}{}
\Fn{\test{}}{
    count = 0

    \For{each student s in S}{
        final pick = [0]$\times len(Schedule)$

        \For{each class c in Pref[s]}{

            t = Position[c][0]      
            
            \If{final pick[t] is empty}{
                 final pick[t] = c
                 
                 count += 1 
            }
        }
    }
    return $count/(len(Pref[0])\times len(S))$
}

\end{algorithm}
\section{Time Analysis}
Let $n$ be the number of students times the number of classes they can take. Let $m$ be the total number of classes. Let $p$ be the number of classrooms. Let $t$ be the number of time slots. Notice that $m$, $p$ and $t$ are strictly smaller than $n$.

Getting the conflicts of each pair of classes takes $O(n)$ and sort this list takes $O(n\log n)$. Sort the sizes of the room takes $O(p \log p)$. The outside for loop will run at most $m \choose 2$ times, which is $O(m^2)$. Finding the smallest room that a class can fill takes $O(p)$ for a sorted list. For each available time slot of that room, comparing with all the other classes in the same time slot takes $O(pt)$. Since all pairs of classes and their number of conflicts are stored in a dictionary where the keys are the class pairs and values are the number of conflicts, checking the student conflicts takes $O(1)$.

Therefore, the entire algorithm runs at complexity $O(n \log n)+O(m^2pt)$. If $p$ and $t$ are too small to affect the total time complexity, then the complexity is equivalent to $O(n \log n)+O(m^2)$.

\section{Discussion}
Since we are prioritizing popular classes that students want to take at the same time, and making these classes available to as many students as possible, we think this would be a great approach to this problem.

In the mean time, we are taking the classroom and professor's availability into consideration. There would not be any 2 classes which are in the same time slot having the same teacher. Also, the class size won't exceed the capacity of the classrooms since we are assigning smaller rooms first. If there are an unavoidable conflict, we will sacrifice the smallest number of students that are involved in this conflict.

However, we are not sure how optimal this algorithm will be. Potential improvement could be made if we can come up with a better solution. Since we are not sure about how much smaller the number of classes is, compared to the number of students, the algorithm will be inefficient if $m^2$ is actually greater than $n \log n$.


\end{document}
